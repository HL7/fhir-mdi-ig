<?xml version="1.0" encoding="UTF-8"?>
<CapabilityStatement xmlns="http://hl7.org/fhir">
    <!--***** Capability Statement Notes *****-->
    <!--This CapabilityStatement FHIR resource is based on the Capability Statement of the RESTful test server maintained by Georgia Tech Research Institiute (GTRI) as part of the 
        Raven Testing Platform, a proof of concept for the MDI FHIR IG. (See: https://raven.heat.icl.gtri.org/ and https://bluejay.heat.icl.gtri.org/mdi-fhir-server/fhir/metadata)
        This CapabilityStatement describes minimum <interaction> capabilities for search-type and read for a subset of MDI <resource> elements. The kind value="requirement" describes 
        the capabilities of a desired system, in this case a server storing data related to a detah or death investigation. 
        This CapabilityStatement does not define <searchRevInclude> or <operation> for any <resource> elements. 
        Additional MDI <resource> elements that may be of interest to implemntes and additional <interaction> capabilities (update, delete, create) are included as comments.-->
    <id value="CapabilityStatement-mdi-cms-server"/>
    <!--<text>
    <!-\-    <status value="generated"/>-\->
    <!-\-    text.status "generated" does not seem to make a difference in rendering-\-><div
    xmlns="http://www.w3.org/1999/xhtml"><h2 id="shall_css" class="no_toc">SHALL Implement All Or Parts Of The Following Capability Statements:</h2><ul><li><a href="CapabilityStatement-mdi-cms-server.html">CapabilityStatement - MDI CMS Server</a></li></ul><h3 id="behavior">FHIR RESTful Capabilities</h3><p>The MDI CMS Server, at a minimum, <strong>SHALL</strong>:</p></div></text>-->
    <url value="http://hl7.org/fhir/us/mdi/CapabilityStatement/CapabilityStatement-mdi-cms-server"/>
    <name value="CapabilityStatementMdiCmsServer"/>
    <title value="CapabilityStatement - MDI CMS Server"/>
    <status value="active"/>
    <experimental value="false"/>
    <date value="2022-07-03"/>
    <description
        value="This resource describes expected capabilities of an MDI CMS Server which is responsible for providing responses to the queries submitted by a Client. &#xA;        It lists FHIR profiles and search parameters that, at a minimum, should be supported by MDI CMS Servers. MDI CMS Clients have the option of choosing from this list to access necessary data."/>
    <kind value="requirements"/>
    <fhirVersion value="4.0.1"/>
    <format value="application/fhir+xml"/>
    <format value="xml"/>
    <format value="application/fhir+json"/>
    <format value="json"/>
    <rest>
        <mode value="server"/>
        <!--Composition-mdi-and-edrs-->
        <documentation value="The MDI CMS Server **SHALL**:
            &#xA;&#xA;1. Support the following US Core profiles: US Core Condition Encounter Diagnosis Profile and/or US Core Condition Problems and Health Concerns Profile; 
            US Core Location Profile
            US Core Organization Profile
            US Core Patient Profile
            US Core Practitioner Profile
            US Core Procedure Profile
            &#xA;1. Implement the RESTful behavior according to the FHIR specification.
            &#xA;1. Follow the requirements documented in the [General Requirements](general-requirements.html) and [Must Support](must-support.html) pages.
            &#xA;1. Support XML and/or JSON source formats for all US Core interactions.
            &#xA;&#xA;The US Core Server **SHOULD**:
            &#xA;1. Follow the guidance documented in the [General Guidance](general-guidance.html) page
            &#xA;"/>
        <resource>
            <type value="Composition"/>
            <!--<profile value="http://hl7.org/fhir/StructureDefinition/Composition"/>-->
            <profile value="http://hl7.org/fhir/us/mdi/StructureDefinition/Composition-mdi-and-edrs"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="search-type"/>
            </interaction>
            <interaction>
                <code value="read"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="*"/>
            <searchInclude value="Composition:patient"/>
            <searchInclude value="Composition:subject"/>
            <!--<searchParam><name value="date"/><type value="date"/><documentation value="Composition editing time"/></searchParam>-->
            <searchParam>
                <name value="death-date"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-date-presumed"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-date-pronounced"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-location"/>
                <type value="string"/>
            </searchParam>
            <searchParam>
                <name value="edrs-file-number"/>
                <type value="token"/>
            </searchParam>
            <searchParam>
                <name value="mdi-case-number"/>
                <type value="token"/>
            </searchParam>
            <searchParam>
                <name value="patient"/>
                <type value="reference"/>
                <documentation value="Who and/or what the composition is about"/>
            </searchParam>
            <searchParam>
                <name value="subject"/>
                <type value="reference"/>
                <documentation value="Who and/or what the composition is about"/>
            </searchParam>
            <searchParam>
                <name value="type"/>
                <type value="token"/>
                <documentation value="Kind of composition (LOINC if possible)"/>
            </searchParam>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
        </resource>
        <!--us-core-patient-->
        <resource>
            <type value="Patient"/>
            <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <!--            <searchInclude value="Patient:general-practitioner"/>
            <searchInclude value="Patient:link"/>
            <searchInclude value="Patient:organization"/>-->
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
            <searchParam>
                <name value="active"/>
                <type value="token"/>
                <documentation value="Whether the patient record is active"/>
            </searchParam>
            <!--            <searchParam>
                <name value="address"/>
                <type value="string"/>
                <documentation value="A server defined search that may match any of the string fields in the Address, including line, city, district, state, country, postalCode, and/or text"/>
            </searchParam>-->
            <!--            <searchParam>
                <name value="address-city"/>
                <type value="string"/>
                <documentation value="A city specified in an address"/>
            </searchParam>-->
            <!--            <searchParam>
                <name value="address-postalcode"/>
                <type value="string"/>
                <documentation value="A postalCode specified in an address"/>
            </searchParam>-->
            <!--            <searchParam>
                <name value="address-state"/>
                <type value="string"/>
                <documentation value="A state specified in an address"/>
            </searchParam>-->
            <searchParam>
                <name value="birthdate"/>
                <type value="date"/>
                <documentation value="The patient's date of birth"/>
            </searchParam>
            <!--            <searchParam>
                <name value="email"/>
                <type value="token"/>
                <documentation value="A value in an email contact"/>
            </searchParam>-->
            <searchParam>
                <name value="family"/>
                <type value="string"/>
                <documentation value="A portion of the family name of the patient"/>
            </searchParam>
            <searchParam>
                <name value="gender"/>
                <type value="string"/>
                <documentation value="Gender of the patient"/>
            </searchParam>
            <searchParam>
                <name value="given"/>
                <type value="string"/>
                <documentation value="A portion of the given name of the patient"/>
            </searchParam>
            <searchParam>
                <name value="identifier"/>
                <type value="token"/>
                <documentation value="A patient identifier"/>
            </searchParam>
            <searchParam>
                <name value="name"/>
                <type value="string"/>
                <documentation
                    value="A server defined search that may match any of the string fields in the HumanName, including family, give, prefix, suffix, suffix, and/or text"
                />
            </searchParam>
            <!--            <searchParam>
                <name value="organization"/>
                <type value="reference"/>
                <documentation value="The organization that is the custodian of the patient record"/>
            </searchParam>-->
            <!--            <searchParam>
                <name value="phone"/>
                <type value="token"/>
                <documentation value="A value in a phone contact"/>
            </searchParam>-->
            <!--            <searchParam>
                <name value="telecom"/>
                <type value="token"/>
                <documentation value="The value in any kind of telecom details of the patient"/>
            </searchParam>-->
        </resource>
        <!--Location-death-->
        <resource>
            <type value="Location"/>
            <!--<profile value="http://hl7.org/fhir/StructureDefinition/Location"/>-->
            <profile value="http://hl7.org/fhir/us/mdi/StructureDefinition/Location-death"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <!--            <searchInclude value="*"/>-->
            <!--<searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam>-->
            <searchParam>
                <name value="_address.district"/>
                <type value="string"/>
                <documentation value="District of Death Location"/>
            </searchParam>
        </resource>
        <resource>
            <type value="Observation"/>
            <!--<profile value="http://hl7.org/fhir/StructureDefinition/Observation"/>-->
            <profile value="http://hl7.org/fhir/us/mdi/StructureDefinition/Observation-death-date"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <!--<searchInclude value="Observation:based-on"/><searchInclude value="Observation:context"/><searchInclude value="Observation:device"/><searchInclude value="Observation:encounter"/><searchInclude value="Observation:patient"/><searchInclude value="Observation:performer"/><searchInclude value="Observation:related-target"/><searchInclude value="Observation:specimen"/><searchInclude value="Observation:subject"/>-->
            <searchInclude value="Observation:value[x]"/>
            <searchInclude value="Observation:component:datetimePronouncedDead.value[x]"/>
            <searchParam>
                <name value="code"/>
                <type value="token"/>
                <documentation value="The code of the observation type"/>
            </searchParam>
            <searchParam>
                <name value="date"/>
                <type value="date"/>
                <documentation
                    value="Obtained date/time. If the obtained element is a period, a date that falls in the period"
                />
            </searchParam>
            <searchParam>
                <name value="patient"/>
                <type value="reference"/>
                <documentation value="The subject that the observation is about (if patient)"/>
            </searchParam>
            <searchParam>
                <name value="subject"/>
                <type value="reference"/>
                <documentation value="The subject that the observation is about"/>
            </searchParam>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
        </resource>
        <resource>
            <type value="Bundle"/>
            <profile value="http://hl7.org/fhir/StructureDefinition/Bundle"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="*"/>
            <searchInclude value="Bundle:composition"/>
            <searchInclude value="Bundle:message"/>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
            <searchParam>
                <name value="composition"/>
                <type value="reference"/>
                <documentation
                    value="The first resource in the bundle, if the bundle type is &quot;document&quot; - this is a composition, and this parameter provides access to search its contents"
                />
            </searchParam>
            <searchParam>
                <name value="identifier"/>
                <type value="token"/>
                <documentation value="Persistent identifier for the bundle"/>
            </searchParam>
            <searchParam>
                <name value="message"/>
                <type value="reference"/>
                <documentation
                    value="The first resource in the bundle, if the bundle type is &quot;message&quot; - this is a message header, and this parameter provides access to search its contents"
                />
            </searchParam>
            <searchParam>
                <name value="type"/>
                <type value="token"/>
                <documentation
                    value="document | message | transaction | transaction-response | batch | batch-response | history | searchset | collection"
                />
            </searchParam>
        </resource>
        <interaction>
            <code value="transaction"/>
        </interaction>
    </rest>
    <messaging>
        <supportedMessage>
            <mode value="receiver"/>
            <definition
                value="http://hl7.org/fhir/us/mdi/MessageDefinition/MessageDefinition-toxicology-system"
            />
        </supportedMessage>
    </messaging>
    <document>
        <mode value="producer"/>
        <profile value="https://fhir.org/fhir/us/mdi/StructureDefinition/Composition-mdi-to-edrs"/>
    </document>
    <document>
        <mode value="consumer"/>
        <profile value="https://fhir.org/fhir/us/mdi/StructureDefinition/Composition-mdi-to-edrs"/>
    </document>
</CapabilityStatement>
