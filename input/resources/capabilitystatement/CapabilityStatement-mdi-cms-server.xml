<?xml version="1.0" encoding="UTF-8"?>
<CapabilityStatement
    xmlns="http://hl7.org/fhir">
    <!--***** Capability Statement Notes *****-->
    <!--This CapabilityStatement FHIR resource is based on the Capability Statement of the RESTful test server maintained by Georgia Tech Research Institiute (GTRI) as part of the 
        Raven Testing Platform, a proof of concept for the MDI FHIR IG. (See: https://raven.heat.icl.gtri.org/ and https://bluejay.heat.icl.gtri.org/mdi-fhir-server/fhir/metadata)
        This CapabilityStatement describes minimum <interaction> capabilities for search-type and read for a subset of MDI <resource> elements. The kind value="requirement" describes 
        the capabilities of a desired system, in this case a server storing data related to a detah or death investigation. 
        This CapabilityStatement does not define <searchRevInclude> or <operation> for any <resource> elements. 
        Additional MDI <resource> elements that may be of interest to implemntes and additional <interaction> capabilities (update, delete, create) are included as comments.-->
    <id value="CapabilityStatement-mdi-cms-server"/>
    <url value="http://hl7.org/fhir/us/mdi/CapabilityStatement/CapabilityStatement-mdi-cms-server"/>
    <name value="CapabilityStatementMdiCmsServer"/>
    <title value="CapabilityStatement - MDI CMS Server"/>
    <status value="active"/>
    <experimental value="false"/>
    <date value="2022-07-03"/>
    <description value="This resource describes expected capabilities of an MDI CMS Server which is responsible for providing responses to the queries submitted by a Client. &#xA;        It lists FHIR profiles and search parameters that, at a minimum, should be supported by MDI CMS Servers. MDI CMS Clients have the option of choosing from this list to access necessary data."/>
    <kind value="requirements"/>
    <fhirVersion value="4.0.1"/>
    <format value="application/fhir+xml"/>
    <format value="xml"/>
    <format value="application/fhir+json"/>
    <format value="json"/>
    <rest>
        <mode value="server"/>
<!--        
        <resource>
            <type value="Bundle"/>
            <profile value="http://hl7.org/fhir/StructureDefinition/Bundle"/>
            <!-\-<interaction><code value="update"/></interaction>-\->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!-\-<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-\->
            <searchInclude value="*"/>
            <searchInclude value="Bundle:composition"/>
            <searchInclude value="Bundle:message"/>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
            <searchParam>
                <name value="composition"/>
                <type value="reference"/>
                <documentation value="The first resource in the bundle, if the bundle type is &quot;document&quot; - this is a composition, and this parameter provides access to search its contents"/>
            </searchParam>
            <searchParam>
                <name value="identifier"/>
                <type value="token"/>
                <documentation value="Persistent identifier for the bundle"/>
            </searchParam>
            <searchParam>
                <name value="message"/>
                <type value="reference"/>
                <documentation value="The first resource in the bundle, if the bundle type is &quot;message&quot; - this is a message header, and this parameter provides access to search its contents"/>
            </searchParam>
            <searchParam>
                <name value="type"/>
                <type value="token"/>
                <documentation value="document | message | transaction | transaction-response | batch | batch-response | history | searchset | collection"/>
            </searchParam>
        </resource>
        -->
        <resource>
<!--            <type value="Composition"/>-->
            <type value="Composition.id"/>
            <profile value="http://hl7.org/fhir/StructureDefinition/Composition"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="search-type"/>
            </interaction>
            <interaction>
                <code value="read"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="*"/>
            <searchInclude value="Composition:patient"/>
            <searchInclude value="Composition:subject"/>
            <searchParam>
                <name value="date"/>
                <type value="date"/>
                <documentation value="Composition editing time"/>
            </searchParam>
            <searchParam>
                <name value="death-date"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-date-presumed"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-date-pronounced"/>
                <type value="date"/>
            </searchParam>
            <searchParam>
                <name value="death-location"/>
                <type value="string"/>
            </searchParam>
            <searchParam>
                <name value="edrs-file-number"/>
                <type value="token"/>
            </searchParam>
            <searchParam>
                <name value="mdi-case-number"/>
                <type value="token"/>
            </searchParam>
            <searchParam>
                <name value="patient"/>
                <type value="reference"/>
                <documentation value="Who and/or what the composition is about"/>
            </searchParam>
            <searchParam>
                <name value="subject"/>
                <type value="reference"/>
                <documentation value="Who and/or what the composition is about"/>
            </searchParam>
            <searchParam>
                <name value="type"/>
                <type value="token"/>
                <documentation value="Kind of composition (LOINC if possible)"/>
            </searchParam>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
        </resource>
        <!--<resource><type value="Condition"/><profile value="http://hl7.org/fhir/StructureDefinition/Condition"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="*"/><searchInclude value="Condition:patient"/><searchInclude value="Condition:subject"/><searchParam><name value="code"/><type value="token"/><documentation value="Code for the condition"/></searchParam><searchParam><name value="patient"/><type value="reference"/><documentation value="Who has the condition?"/></searchParam><searchParam><name value="subject"/><type value="reference"/><documentation value="Who has the condition?"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <!--<resource><type value="DiagnosticReport"/><profile value="http://hl7.org/fhir/StructureDefinition/DiagnosticReport"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="DiagnosticReport:encounter"/><searchInclude value="DiagnosticReport:patient"/><searchInclude value="DiagnosticReport:subject"/><searchParam><name value="encounter"/><type value="reference"/><documentation value="The Encounter when the order was made"/></searchParam><searchParam><name value="identifier"/><type value="token"/><documentation value="An identifier for the report"/></searchParam><searchParam><name value="mdi-case-number"/><type value="token"/></searchParam><searchParam><name value="patient"/><type value="reference"/><documentation value="The subject of the report if a patient"/></searchParam><searchParam><name value="subject"/><type value="reference"/><documentation value="The subject of the report"/></searchParam><searchParam><name value="tox-lab-case-number"/><type value="token"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <!--<resource><type value="DocumentReference"/><profile value="http://hl7.org/fhir/StructureDefinition/DocumentReference"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="DocumentReference:encounter"/><searchInclude value="DocumentReference:patient"/><searchInclude value="DocumentReference:subject"/><searchParam><name value="date"/><type value="date"/><documentation value="When this document reference was created"/></searchParam><searchParam><name value="encounter"/><type value="reference"/><documentation value="Context of the document  content"/></searchParam><searchParam><name value="identifier"/><type value="token"/><documentation value="Master Version Specific Identifier"/></searchParam><searchParam><name value="patient"/><type value="reference"/><documentation value="Who/what is the subject of the document"/></searchParam><searchParam><name value="subject"/><type value="reference"/><documentation value="Who/what is the subject of the document"/></searchParam><searchParam><name value="type"/><type value="token"/><documentation value="Kind of document (LOINC if possible)"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <resource>
<!--            <type value="Location"/>-->
            <type value="Location.address.district"/>
<!--            <profile value="http://hl7.org/fhir/StructureDefinition/Location"/>-->
            <profile value="http://hl7.org/fhir/us/mdi/StructureDefinition/Location-death"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="*"/>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
        </resource>
        <!--<resource><type value="MessageHeader"/><profile value="http://hl7.org/fhir/StructureDefinition/MessageHeader"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="*"/><searchInclude value="MessageHeader:focus"/><searchParam><name value="focus"/><type value="reference"/><documentation value="The actual content of the message"/></searchParam><searchParam><name value="source"/><type value="string"/><documentation value="Name of system"/></searchParam><searchParam><name value="source-uri"/><type value="string"/><documentation value="Actual message source address or id"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <resource>
            <type value="Observation"/>
            <profile value="http://hl7.org/fhir/StructureDefinition/Observation"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="Observation:based-on"/>
            <searchInclude value="Observation:context"/>
            <searchInclude value="Observation:device"/>
            <searchInclude value="Observation:encounter"/>
            <searchInclude value="Observation:patient"/>
            <searchInclude value="Observation:performer"/>
            <searchInclude value="Observation:related-target"/>
            <searchInclude value="Observation:specimen"/>
            <searchInclude value="Observation:subject"/>
            <searchParam>
                <name value="code"/>
                <type value="token"/>
                <documentation value="The code of the observation type"/>
            </searchParam>
            <searchParam>
                <name value="date"/>
                <type value="date"/>
                <documentation value="Obtained date/time. If the obtained element is a period, a date that falls in the period"/>
            </searchParam>
            <searchParam>
                <name value="patient"/>
                <type value="reference"/>
                <documentation value="The subject that the observation is about (if patient)"/>
            </searchParam>
            <searchParam>
                <name value="subject"/>
                <type value="reference"/>
                <documentation value="The subject that the observation is about"/>
            </searchParam>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
        </resource>
        <!--<resource><type value="Organization"/><profile value="http://hl7.org/fhir/StructureDefinition/Organization"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="Organization:partof"/><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam><searchParam><name value="name"/><type value="string"/><documentation value="A portion of the organization's name or alias"/></searchParam></resource>-->
        <!--<resource><type value="Parameters"/><profile value="http://hl7.org/fhir/StructureDefinition/Parameters"/><interaction><code value="read"/></interaction><searchInclude value="*"/></resource>-->
        <resource>
            <type value="Patient"/>
            <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"/>
            <!--<interaction><code value="update"/></interaction>-->
            <interaction>
                <code value="read"/>
            </interaction>
            <interaction>
                <code value="search-type"/>
            </interaction>
            <!--<interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction>-->
            <searchInclude value="Patient:general-practitioner"/>
            <searchInclude value="Patient:link"/>
            <searchInclude value="Patient:organization"/>
            <searchParam>
                <name value="_id"/>
                <type value="token"/>
                <documentation value="The ID of the resource"/>
            </searchParam>
            <searchParam>
                <name value="active"/>
                <type value="token"/>
                <documentation value="Whether the patient record is active"/>
            </searchParam>
            <searchParam>
                <name value="address"/>
                <type value="string"/>
                <documentation value="A server defined search that may match any of the string fields in the Address, including line, city, district, state, country, postalCode, and/or text"/>
            </searchParam>
            <searchParam>
                <name value="address-city"/>
                <type value="string"/>
                <documentation value="A city specified in an address"/>
            </searchParam>
            <searchParam>
                <name value="address-postalcode"/>
                <type value="string"/>
                <documentation value="A postalCode specified in an address"/>
            </searchParam>
            <searchParam>
                <name value="address-state"/>
                <type value="string"/>
                <documentation value="A state specified in an address"/>
            </searchParam>
            <searchParam>
                <name value="birthdate"/>
                <type value="date"/>
                <documentation value="The patient's date of birth"/>
            </searchParam>
            <searchParam>
                <name value="email"/>
                <type value="token"/>
                <documentation value="A value in an email contact"/>
            </searchParam>
            <searchParam>
                <name value="family"/>
                <type value="string"/>
                <documentation value="A portion of the family name of the patient"/>
            </searchParam>
            <searchParam>
                <name value="gender"/>
                <type value="string"/>
                <documentation value="Gender of the patient"/>
            </searchParam>
            <searchParam>
                <name value="given"/>
                <type value="string"/>
                <documentation value="A portion of the given name of the patient"/>
            </searchParam>
            <searchParam>
                <name value="identifier"/>
                <type value="token"/>
                <documentation value="A patient identifier"/>
            </searchParam>
            <searchParam>
                <name value="name"/>
                <type value="string"/>
                <documentation value="A server defined search that may match any of the string fields in the HumanName, including family, give, prefix, suffix, suffix, and/or text"/>
            </searchParam>
            <searchParam>
                <name value="organization"/>
                <type value="reference"/>
                <documentation value="The organization that is the custodian of the patient record"/>
            </searchParam>
            <searchParam>
                <name value="phone"/>
                <type value="token"/>
                <documentation value="A value in a phone contact"/>
            </searchParam>
            <searchParam>
                <name value="telecom"/>
                <type value="token"/>
                <documentation value="The value in any kind of telecom details of the patient"/>
            </searchParam>
        </resource>
        <!--<resource><type value="Practitioner"/><profile value="http://hl7.org/fhir/StructureDefinition/Practitioner"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="*"/><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam><searchParam><name value="active"/><type value="token"/><documentation value="Whether the practitioner record is active"/></searchParam><searchParam><name value="family"/><type value="string"/><documentation value="A portion of the family name"/></searchParam><searchParam><name value="gender"/><type value="string"/><documentation value="Gender of the practitioner"/></searchParam><searchParam><name value="given"/><type value="string"/><documentation value="A portion of the given name"/></searchParam><searchParam><name value="identifier"/><type value="token"/><documentation value="A practitioner's Identifier"/></searchParam><searchParam><name value="name"/><type value="string"/><documentation
                    value="A server defined search that may match any of the string fields in the HumanName, including family, give, prefix, suffix, suffix, and/or text"
                /></searchParam></resource>-->
        <!--<resource><type value="PractitionerRole"/><profile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="*"/><searchInclude value="PractitionerRole:organization"/><searchInclude value="PractitionerRole:practitioner"/><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam><searchParam><name value="active"/><type value="token"/><documentation value="Whether this practitioner role record is in active use"/></searchParam><searchParam><name value="identifier"/><type value="token"/><documentation value="A practitioner's Identifier"/></searchParam><searchParam><name value="organization"/><type value="reference"/><documentation
                    value="The identity of the organization the practitioner represents / acts on behalf of"
                /></searchParam><searchParam><name value="practitioner"/><type value="reference"/><documentation
                    value="Practitioner that is able to provide the defined services for the organization"
                /></searchParam></resource>-->
        <!--<resource><type value="Procedure"/><profile value="http://hl7.org/fhir/StructureDefinition/Procedure"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="Procedure:context"/><searchInclude value="Procedure:patient"/><searchInclude value="Procedure:performer"/><searchParam><name value="code"/><type value="token"/><documentation value="A code to identify a  procedure"/></searchParam><searchParam><name value="date"/><type value="date"/><documentation value="When the procedure was performed"/></searchParam><searchParam><name value="encounter"/><type value="reference"/><documentation value="Encounter created as part of"/></searchParam><searchParam><name value="identifier"/><type value="token"/><documentation value="A unique identifier for a procedure"/></searchParam><searchParam><name value="patient"/><type value="reference"/><documentation value="Search by subject - a patient"/></searchParam><searchParam><name value="performer"/><type value="reference"/><documentation value="The reference to the practitioner"/></searchParam><searchParam><name value="subject"/><type value="reference"/><documentation value="Search by subject"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <!--<resource><type value="Specimen"/><profile value="http://hl7.org/fhir/StructureDefinition/Specimen"/><interaction><code value="update"/></interaction><interaction><code value="read"/></interaction><interaction><code value="search-type"/></interaction><interaction><code value="delete"/></interaction><interaction><code value="create"/></interaction><searchInclude value="*"/><searchInclude value="Specimen:patient"/><searchInclude value="Specimen:subject"/><searchParam><name value="accession"/><type value="token"/><documentation value="The accession number associated with the specimen"/></searchParam><searchParam><name value="patient"/><type value="reference"/><documentation value="The patient the specimen comes from"/></searchParam><searchParam><name value="subject"/><type value="reference"/><documentation value="The subject of the specimen"/></searchParam><searchParam><name value="_id"/><type value="token"/><documentation value="The ID of the resource"/></searchParam></resource>-->
        <interaction>
            <code value="transaction"/>
        </interaction>
    </rest>
    <messaging>
        <supportedMessage>
            <mode value="receiver"/>
            <definition value="http://hl7.org/fhir/us/mdi/MessageDefinition/MessageDefinition-toxicology-system"/>
        </supportedMessage>
    </messaging>
    <document>
        <mode value="producer"/>
        <profile value="https://fhir.org/fhir/us/mdi/StructureDefinition/Composition-mdi-to-edrs"/>
    </document>
    <document>
        <mode value="consumer"/>
        <profile value="https://fhir.org/fhir/us/mdi/StructureDefinition/Composition-mdi-to-edrs"/>
    </document>
</CapabilityStatement>